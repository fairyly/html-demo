# 移动端适配各个手机可伸缩布局方案

* 可伸缩布局方案: https://github.com/amfe/lib-flexible/tree/master
* https://www.w3cplus.com/css/vw-for-layout.html
* [如何在Vue项目中使用vw实现移动端适配](https://www.w3cplus.com/mobile/vw-layout-in-vue.html)
  - viewport-units-buggyfill: https://github.com/rodneyrehm/viewport-units-buggyfill
* 针对webpack的像素转vw单位的loader插件: https://github.com/herorest/px2vw


以前的Flexible方案是通过JavaScript来模拟vw的特性，  
那么到今天为止，vw已经得到了众多浏览器的支持，也就是说，可以直接考虑将vw单位运用于我们的适配布局中。

众所周知，vw是基于Viewport视窗的长度单位，这里的视窗（Viewport）指的就是浏览器可视化的区域，  
而这个可视区域是window.innerWidth/window.innerHeight的大小。

和Viewport相关的单位有四个，分别为vw、vh、vmin和vmax。

- vw：是Viewport's width的简写,1vw等于window.innerWidth的1%
- vh：和vw类似，是Viewport's height的简写，1vh等于window.innerHeihgt的1%
- vmin：vmin的值是当前vw和vh中较小的值
- vmax：vmax的值是当前vw和vh中较大的值
- vmin和vmax是根据Viewport中长度偏大的那个维度值计算出来的，如

原文: https://www.w3cplus.com/css/vw-for-layout.html © w3cplus.com

- 设置根字体，监听屏幕缩放，使用 rem 相对单位

  ```
  var docEl = document.documentElement,
      //总来的来就是监听当然窗口的变化，一旦有变化就需要重新设置根字体的值
      resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
      recalc = function() {
        //设置根字体大小
        docEl.style.fontSize = 10 * (docEl.clientWidth / 320) + 'px';
      };
    //绑定浏览器缩放与加载时间
    window.addEventListener(resizeEvt, recalc, false);
    document.addEventListener('DOMContentLoaded', recalc, false);
   
  ```


- 适配方案
```
index.js
(function flexible (window, document) {
  var docEl = document.documentElement
  var dpr = window.devicePixelRatio || 1

  // adjust body font size
  function setBodyFontSize () {
    if (document.body) {
      document.body.style.fontSize = (12 * dpr) + 'px'
    }
    else {
      document.addEventListener('DOMContentLoaded', setBodyFontSize)
    }
  }
  setBodyFontSize();

  // set 1rem = viewWidth / 10
  function setRemUnit () {
    var rem = docEl.clientWidth / 10
    docEl.style.fontSize = rem + 'px'
  }

  setRemUnit()

  // reset rem unit on page resize
  window.addEventListener('resize', setRemUnit)
  window.addEventListener('pageshow', function (e) {
    if (e.persisted) {
      setRemUnit()
    }
  })

  // detect 0.5px supports
  if (dpr >= 2) {
    var fakeBody = document.createElement('body')
    var testElement = document.createElement('div')
    testElement.style.border = '.5px solid transparent'
    fakeBody.appendChild(testElement)
    docEl.appendChild(fakeBody)
    if (testElement.offsetHeight === 1) {
      docEl.classList.add('hairlines')
    }
    docEl.removeChild(fakeBody)
  }
}(window, document))

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
<script src="./node_modules/amfe-flexible/index.js"></script>
```

- 使用媒体查询 media 

```
@media (min-device-width : 375px) {
   html{font-size: 64px;}
}
// iphone6 plus 
@media (min-device-width : 414px) {
    html{font-size: 75px;}
}
```

http://www.cnblogs.com/lyzg/p/4877277.html
