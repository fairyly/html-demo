# 12306 订票
- [购票后，可以在中途站上车吗？](https://www.12306.cn/mormhweb/tlcs/201505/t20150511_16532.html)

查询车站名称接口:https://kyfw.12306.cn/otn/resources/js/framework/station_name.js?station_version=1.8955

查询余票接口:https://kyfw.12306.cn/otn/leftTicket/queryZ?leftTicketDTO.train_date=2018-02-13&leftTicketDTO.from_station=HZH&leftTicketDTO.to_station=XUN&purpose_codes=ADULT

https://kyfw.12306.cn/otn/leftTicket/queryZ?leftTicketDTO.train_date=2019-01-30&leftTicketDTO.from_station=HZH&leftTicketDTO.to_station=TBF&purpose_codes=ADULT

接口返回:
```
{
  "data":{
    "flag":"1",
    "map":{"HGH":"杭州东","HZH":"杭州","XUN":"信阳"},
    "result":[
      "|11点30分起售|550000K751C0|K751|SNH|PEN|HGH|XUN|13:32|03:20|13:48|IS_TIME_NOT_BUY|BmXmXSDuWQDa%2BVnQUmdkmlWFAHPH00e7eQx7e2ugXvqvWhTd3CUa7dPjDZU%3D|20180213|3|H2|06|19|0|0||||*|||*||*|*|||||10401030|1413|0",
      "|10点30分起售|5e000K104021|K1040|NGH|LZJ|HZH|XUN|16:06|02:41|10:35|IS_TIME_NOT_BUY|XjiBFl0I4LC7fUV3e13QSjg1jlCYqOPUIcEILIHGjpkcZyc9zhiCXNpXBjI%3D|20180213|3|H3|05|12|0|0||||*|||*||*|*|||||10401030|1413|0",
      "|10点30分起售|5e0000K46625|K466|NGH|XAY|HZH|XUN|16:38|03:35|10:57|IS_TIME_NOT_BUY|XjiBFl0I4LC7fUV3e13QSjg1jlCYqOPUIcEILIHGjpkcZyc9zhiCXNpXBjI%3D|20180213|3|H6|05|14|0|0||||*|||*||*|*|||||10401030|1413|0",
      "|10点30分起售|5e0000K42611|K426|NGH|LYF|HZH|XUN|20:57|08:08|11:11|IS_TIME_NOT_BUY|XjiBFl0I4LC7fUV3e13QSjg1jlCYqOPUIcEILIHGjpkcZyc9zhiCXNpXBjI%3D|20180213|3|H3|05|16|0|0||||*|||*||*|*|||||10401030|1413|0",
      "|10点30分起售|560000K65620|K656|HZH|NDC|HZH|XUN|21:35|08:45|11:10|IS_TIME_NOT_BUY|XjiBFl0I4LC7fUV3e13QSjg1jlCYqOPUIcEILIHGjpkcZyc9zhiCXNpXBjI%3D|20180213|3|H3|01|13|0|0||||*|||*||*|*|||||10401030|1413|0"
    ]
  },
  "httpstatus":200,
  "messages":"",
  "status":true
}
```

自动购票脚本:
```
var t,tt;
t = setInterval(function(){
	
	// 点击查询余票
	$('#query_ticket').click();

	if($('#ticket_5e0000K42611 .btn72').length){
		clearInterval(t);
		// 点击预定车次
		$('#ticket_5e0000K42611 .btn72').click();
		return false;
	}
	// 备用车次预定
	if($('#ticket_560000K65620 .btn72').length){
		clearInterval(t);
		// 点击预定车次
		$('#ticket_560000K65620 .btn72').click();
		
	}
	
},500)

/*点击预定后 跳转页面再执行 */
tt = setInterval(function(){
  if($('#normalPassenger_0').length){
    // 选择联系人
    $('#normalPassenger_0').click();
    clearInterval(tt);

    // 提交订单
    $('#submitOrder_id').click();

    if($('#qr_submit_id').length){
      // 确定
      $('#qr_submit_id').click()
    }
  }
},500)
```
* 信阳--->杭州
```
var t,tt;
t = setInterval(function(){
	
	// 点击查询余票
	$('#query_ticket').click();
	
	if($('#ticket_85000K104201 .btn72').length){
		clearInterval(t);
		// 点击预定车次
		$('#ticket_85000K104201 .btn72').click();
		return false;
	}
	
	// 备用车次预定
	if($('#ticket_330000K65504 .btn72').length){
		clearInterval(t);
		// 点击预定车次
		$('#ticket_330000K65504 .btn72').click();
		
	}
	
},500)
```


- 杭州-->桐柏

```
var t,tt;
t = setInterval(function(){
	
	// 点击查询余票
	$('#query_ticket').click();
    
    if($('#ticket_560000K65620 .btn72').length){
		clearInterval(t);
		// 点击预定车次
		$('#ticket_560000K65620 .btn72').click();
		return false;
	}

	if($('#ticket_5e0000K42611 .btn72').length){
		clearInterval(t);
		// 点击预定车次
		$('#ticket_5e0000K42611 .btn72').click();
		return false;
	}
	// 备用车次预定
	if($('#ticket_5e0000K46625 .btn72').length){
		clearInterval(t);
		// 点击预定车次
		$('#ticket_5e0000K46625 .btn72').click();
		return false;
	}
	
},5000)
```


## 方案 1 ：杭州---信阳


## 方案 2: 杭州---桐柏


## 方案 3：杭州----上海---信阳



## 方案 4：杭州----上海---桐柏
