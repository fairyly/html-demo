# 调用腾讯位置接口显示地图

```
<html> 
<head> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
    <title>Geolocation Components Demo - zoom effect</title> 
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <style>
        * {margin: 0; padding: 0; border: 0;}
        body {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        #geoPage, #markPage {
            position: relative;
        }
    </style>
    <script type="text/JavaScript"> 
    window.addEventListener('message', function(event) { 
        // 接收位置信息
        var loc = event.data;
        console.log('location', loc)
        
        var markUrl = 'http://apis.map.qq.com/tools/poimarker?marker=coord:' + loc.lat + ',' +loc.lng+ ';title:我的位置;addr:' + (loc.addr||loc.city) + '&referer=myapp&key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77';
        document.getElementById('markPage').src = markUrl;
    }, false);
    </script> 
</head> 
<body> 
     <!-- 通过 iframe 嵌入前端定位组件 --> 
     <iframe id="geoPage" width="100%" height="30%" frameborder=0 scrolling="no"
        src="https://apis.map.qq.com/tools/geolocation?key=OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77&referer=myapp&effect=zoom"></iframe> 
     <!-- 接收到位置信息后 通过 iframe 嵌入位置标注组件 --> 
     <iframe id="markPage" width="100%" height="70%" frameborder=0 scrolling="no" src=""></iframe> 
 </body> 
 </html>
```
