# 一步一步搭建 vuepress

## install
```
# 安装
yarn global add vuepress # 或者：npm install -g vuepress

# 新建一个 markdown 文件
echo '# Hello VuePress!' > README.md

# 开始写作
vuepress dev .

# 构建静态文件
vuepress build .
```

## 基本目录结构

```
目录结构：
├─.vuepress
│  ├─components
│  └─public
│      └─icons
│   └─config.js // 配置文件
├─config // Vuepress文档的配置参考内容
├─default-theme-config // Vuepress文档的默认主题配置内容
├─guide // Vuepress文档的指南内容
└─zh // 中文文档目录
    ├─config
    ├─default-theme-config
    └─guide
└─README.md // 首页配置文件

```


## 1.新建目录

```
mkdir docs

cd docs

npm init 

# 修改 package.json

{
  "scripts": {
    "docs:dev": "vuepress dev docs",
    "docs:build": "vuepress build docs"
  }
}

# 运行
yarn docs:dev # 或者：npm run docs:dev

# 打包
yarn docs:build # 或者：npm run docs:build
```


## 2.vuepress/config.js 配置
### 2.1.首页配置：YAML front matter：[https://jekyllrb.com/docs/front-matter/](https://jekyllrb.com/docs/front-matter/)

```yaml
---
home: true
heroImage: /logo.png
actionText: 快速上手 →
actionLink: /zh/guide/
features:
- title: 简洁至上
  details: 以 Markdown 为中心的项目结构，以最少的配置帮助你专注于写作。
- title: Vue驱动
  details: 享受 Vue + webpack 的开发体验，在 Markdown 中使用 Vue 组件，同时可以使用 Vue 来开发自定义主题。
- title: 高性能
  details: VuePress 为每个页面预渲染生成静态的 HTML，同时在页面被加载的时候，将作为 SPA 运行。

- title: 高性能
  details: VuePress 为每个页面预渲染生成静态的 HTML，同时在页面被加载的时候，将作为 SPA 运行。

footer: MIT Licensed | Copyright © 2019-present 
---
```

- 如果再添加内容可以在下面以 markdown 语法编写

```
#全局安装
yarn global add vuepress@next # 或者：npm install -g vuepress@next
```

- `logo` 图片放在 `.vuepress/public` 下
- `favicon.ico` 图片放在 `.vuepress/public` 下



### 2.2 多语言配置
>[站点多语言配置](https://vuepress.vuejs.org/zh/guide/i18n.html#%E7%AB%99%E7%82%B9%E5%A4%9A%E8%AF%AD%E8%A8%80%E9%85%8D%E7%BD%AE)
```
locales: {
  // 键名是该语言所属的子路径
  // 作为特例，默认语言可以使用 '/' 作为其路径。
  '/': {
    lang: 'en-US', // 将会被设置为 <html> 的 lang 属性
    title: 'VuePress',
    description: 'Vue-powered Static Site Generator'
  },
  '/zh/': {
    lang: 'zh-CN',
    title: 'VuePress',
    description: 'Vue 驱动的静态网站生成器'
  }
}
```
>默认主题也内置了多语言支持，可以通过 themeConfig.locales 来配置

```
locales: {
    '/': {
      selectText: 'Languages',
      label: 'English',
      editLinkText: 'Edit this page on GitHub',
      serviceWorker: {
        updatePopup: {
          message: "New content is available.",
          buttonText: "Refresh"
        }
      },
      algolia: {},
      nav: [
        { text: 'Nested', link: '/nested/' }
      ],
      sidebar: {
        '/': [/* ... */],
        '/nested/': [/* ... */]
      }
    },
    '/zh/': {
      // 多语言下拉菜单的标题
      selectText: '选择语言',
      // 该语言在下拉菜单中的标签
      label: '简体中文',
      // 编辑链接文字
      editLinkText: '在 GitHub 上编辑此页',
      // Service Worker 的配置
      serviceWorker: {
        updatePopup: {
          message: "发现新内容可用.",
          buttonText: "刷新"
        }
      },
      // 当前 locale 的 algolia docsearch 选项
      algolia: {},
      nav: [
        { text: '嵌套', link: '/zh/nested/' }
      ],
      sidebar: {
        '/zh/': [/* ... */],
        '/zh/nested/': [/* ... */]
      }
    }
  }

# 也可以设置 nav  的时候加入 语言

themeConfig: {
  nav: [
    { text: 'Home', link: '/' },
    { text: 'Github', link: 'https://github.com/Firenzia/sakura-ui/' },
    {
      text: 'Languages',
      items: [
        { text: 'Chinese', link: '/language/chinese' },
        { text: 'Japanese', link: '/language/japanese' }
      ]
    }
  ]
}
```

## 2.3 主题设置

>新建 `guide` 目录，新建 `guide/README.md`,`guide/one.md`,`guide/two.md`,  
markdown 中 以及标题，对应左侧菜单的一级，二级对应 左侧菜单二级  

```
themeConfig: {
    nav: [
      { text: 'Home', link: '/' },
      { text: 'Github', link: 'https://github.com/Firenzia/sakura-ui/' },
      {
        text: 'Languages',
        items: [
          { text: 'Chinese', link: '/guide/' },
          { text: 'Japanese', link: '/language/japanese' }
        ]
      }
    ],
    sidebar: {
      '/guide/': [
        '',     /* /foo/ */
        'one',  /* /foo/one.html */
        'two'   /* /foo/two.html */
      ]
    }
}

# sidebar 也可以这么配置
sidebar: [
  {
    title: 'one', // 侧边栏名称
    collapsable: true, // 可折叠
    children: [
      '/guide/one', // 你的md文件地址
    ]
  },
  {
    title: 'two', 
    collapsable: true,
    children: [
      '/guide/two',
    ]
  }
]


或者

sidebar: 'auto'
```

### 2.4  CSS 覆盖

```
0.x 版本创建一个 .vuepress/override.styl 文件
1.x 版本创建一个 .vuepress/styles/palette.styl

这里有一些你可以调整的颜色变量：

// showing default values
$accentColor = #3eaf7c
$textColor = #2c3e50
$borderColor = #eaecef
$codeBgColor = #282c34

```
- 自定义页面类

在该页面的 YAML front matter 中声明一个 pageClass：

```
---
pageClass: custom-page-class
---
```

写专门针对该页面的 CSS ：

```
/* .vuepress/override.styl */

.custom-page-class .custom {
  /* 特定页面的 CSS */
}
```

- 基本配置好的 [demo](https://github.com/fairyly/VuePressDoc/tree/initDoc)

## 参考
- [docs](https://vuepress.vuejs.org/zh/guide/)
- [awesome-vuepress](https://github.com/ulivz/awesome-vuepress)
- [VuePress 手摸手教你搭建一个类Vue文档风格的技术文档/博客](https://blog.csdn.net/obkoro1/article/details/82585981)
- [vuepress-theme-yubisaki-example](https://github.com/Bloss/vuepress-theme-yubisaki-example)
