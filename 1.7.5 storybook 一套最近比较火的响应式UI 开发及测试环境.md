# storybook 是一套最近比较火的响应式 UI 组件开发及测试环境

>test: React, React Native, Vue, Angular, Ember

## install

```
npm i -g @storybook/cli
```


## Storybook for Vue

- 1.需要先安装：
```
npm i --save vue
npm i --save-dev babel-core
npm i --save-dev babel-loader

vue 项目建好后

再安装：
npm i --save-dev @storybook/vue
```
- 2.添加 NPM script
```
{
  "scripts": {
    "storybook": "start-storybook -p 9001 -c .storybook"
  }
}
```

- 3. 创建一个  config 文件

  - 有 3 件事情你需要告诉 storybook:
  - 1.导入和全局注册 Vue.component() 任何全局自定义组件，就像你在你的项目做的那样。(注意:在本地注册的组件将被自动带来了)。
  - 2.引入 Vue插件(如vuex),您还需要安装使用 Vue.use。
  - 3. 引入
```
这有一个例子:
.storybook/config.js

import { configure } from '@storybook/vue';

import Vue from 'vue';
import Vuex from 'vuex'; // Vue plugins

// Import your custom components.
import Mybutton from '../src/stories/Button.vue';

// Install Vue plugins.
Vue.use(Vuex);

// Register custom components.
Vue.component('my-button', Mybutton);

function loadStories() {
  // You can require as many stories as you need.
  require('../src/stories');
}

configure(loadStories, module);
```
这个例子注册你的自定义组件 Button.vue，

- 写你的 stories： src 目录下的 stories
```
stories/index.js

import Vue from 'vue';

import { storiesOf } from '@storybook/vue';

import MyButton from './Button.vue';

storiesOf('MyButton', module)
  .add('story as a template', () => '<my-button :rounded="true">story as a function template</my-button>')
  .add('story as a component', () => ({
    components: { MyButton },
    template: '<my-button :rounded="true">rounded</my-button>'
  }));
```
- stories/Button.vue
```
<template>
  <button class="button" :style="{color: color, borderColor: color}" @click="handleClick" @dblclick="handleDblclick" :class="{rounded: rounded}"><slot></slot>!</button>
</template>

<script>
  export default {
    props: {
      rounded: Boolean,
      handleClick: {
        default: () => () => null
      },
      handleDblclick: {
        default: () => () => null
      },
      color: {
        default: '#42b983'
      }
    }
  }
</script>

<style>
  .rounded {
    border-radius: 5px;
  }

  .button {
    border: 3px solid;
    padding: 10px 20px;
    background-color: white;
    outline: none;
  }
  
</style>
```

- 运行你的 Storybook

```
npm run storybook
```

## 最后运行遇到了问题
-  `Error: Cannot find module 'babel-preset-vue'`
  - 解决： [issue-4505](https://github.com/storybooks/storybook/issues/4505)
  - `npm i --save-dev @storybook/vue@rc ` 
  - `npm i --save-dev babel-loader vue-loader vue-template-compiler `
  - `npm i --save-dev @babel/core`
  - `npm i --save-dev babel-preset-vue`
  


## 参考
- [GitHub](https://github.com/storybooks/storybook)
- [docs](https://storybook.js.org/)
- [](https://www.jianshu.com/p/c2e44de0ddfd)
