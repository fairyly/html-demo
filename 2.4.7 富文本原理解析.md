# 2.4.7 富文本原理解析

## contenteditable 属性

假如我们给一个标签加上 contenteditable="true" 的属性，就像这样：

```
<div contenteditable="true"></div>
```

复制代码那么在这个 `div` 中我们就可以对其进行任意编辑了。  
如果想要插入的子节点不可编辑，我们只需要把子节点的属性设置为 `contenteditable="false"` 即可，就像这样：

## document.execCommand 方法

既然我们可以对上面的 div 随意编辑，那具体怎么编辑呢，目前好像也还是只能输入文本，要怎样才能进行其他操作呢（比如加粗、倾斜、插入图片等等）🤔？  
其实浏览器给我们提供了这样的一个方法 `document.execCommand`，通过它我们就能够操纵上面的可编辑区。具体语法如下：
```
// document.execCommand(命令名称，是否展示用户界面，命令需要的额外参数)
document.execCommand(aCommandName, aShowDefaultUI, aValueArgument)
```
其中第一个参数就是一些命令名称，具体的可以查看 MDN；  
第二个参数写死为 false 就行了，因为早前 IE 有这样一个参数，为了兼容吧，不过这个参数在现代浏览器中是没有影响的；  
第三个参数就是一些命令可能需要额外的参数，比如插入图片就要多传个 url 或 base64 的参数，没有的话传个 null 就行。

我们简要列举下它的几个使用方式，大家就知道怎么用了👇：

```
// 加粗
document.execCommand('bold', false, null);
// 添加图片
document.execCommand('insertImage', false, url || base64);
// 把一段文字用 p 标签包裹起来
document.execCommand('formatblock', false, '<p>');
```

这个命令就是富文本的核心



## 参考
- [富文本原理了解一下](https://juejin.im/post/5cfe4e8a6fb9a07ec63b09a4)
