# 2.5.9VSCode插件开发-命令菜单快捷键


## 1.命令

```
extension.js

let disposable = vscode.commands.registerCommand('extension.helloWorld', function () {
  // The code you place here will be executed every time your command is executed

  // Display a message box to the user
  vscode.window.showInformationMessage('Hello World!');
});

context.subscriptions.push(disposable);
```

- 然后在`package.json`文件声明：
```
"contributes": {
		"commands": [
			{
				"command": "extension.helloWorld",
				"title": "Hello World"
			}
		],
  ...
}
```

>vscode.commands.registerCommand是注册命令的API，执行后会返回一个Disposable对象，  
所有注册类的API执行后都需要将返回结果放到context.subscriptions中去。


### 1.1. 回调函数参数

回调函数接收一个可选参数 uri：

- 当从资源管理器中右键执行命令时会把当前选中资源路径uri作为参数传过；
- 当从编辑器中右键菜单执行时则会将当前打开文件路径URI传过去；
- 当直接按Ctrl+Shift+P执行命令时，这个参数为空；

示例：

```
context.subscriptions.push(vscode.commands.registerCommand('extension.demo.getCurrentFilePath', (uri) => {
	vscode.window.showInformationMessage(`当前文件(夹)路径是：${uri ? uri.path : '空'}`);
}));
```

package.json如下：

```
  "commands": [
			{
				"command": "extension.helloWorld",
				"title": "Hello World"
			},
			{
				"command": "extension.getCurrentFilePath",
				"title": "获取当前文件(夹)路径"
			}
		],
	"menus": {
    "editor/context": [
      {
        "when": "editorFocus",
        "command": "extension.helloWorld",
        "group": "navigation"
      },
      {
        "when": "editorFocus",
        "command": "extension.getCurrentFilePath",
        "group": "navigation"
      }
    ],
    "explorer/context": [{
      "command": "extension.getCurrentFilePath",
      "group": "navigation"
    }]
  }
```

最终效果


## issue

>这里有点问题就是，在基础项目的时候加了一个`editor/context`命令了。这时候又加一个设置，又加一个对象进去







## 参考
- [VSCode插件开发全攻略（四）命令、菜单、快捷键](http://blog.haoji.me/vscode-plugin-command-and-menu.html)
