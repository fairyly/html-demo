# 2.8.3 短链接

>其实上述功能点的原理很简单，简单描述一下：
用户输入长网址，服务端接收后进行处理，并根据长网址的内容，生成一个短码，并将映射关系进行存储。然后根据短码拼接出短链接，返回给用户；
用户点击短链接，服务器端根据短链接中的短码，查找到对应的长网址，并302跳转到对应的页面。


>为什么要使用302跳转，而不是301跳转呢？

301是永久重定向，302是临时重定向。短地址一经生成就不会变化，所以用301是符合http语义的。但是如果用了301， Google，百度等搜索引擎，搜索的时候会直接展示真实地址，那我们就无法统计到短地址被点击的次数了，也无法收集用户的Cookie, User Agent 等信息，这些信息可以用来做很多有意思的大数据分析，也是短网址服务商的主要盈利来源。
引自知乎-武林的回答

![](https://user-gold-cdn.xitu.io/2019/7/16/16bf891f74fa36ac?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)


## 生成短码的方法

>通过上面的全流程设计，会发现主要的问题就是如何通过长网址，去生成对应的短码。
短码一般是由 [a - z, A - Z, 0 - 9] 这62 个字母或数字组成，短码的长度也可以自定义，但一般不超过8位。  
比较常用的都是6位，6位的短码已经能有568亿种的组合：(26+26+10)^6 = 56800235584，已满足绝大多数的使用场景。


目前比较流行的生成短码方法有：`自增id`、`摘要算法`、`普通随机数`。




## 参考
- [短网址(short URL)系统的原理及其实现](https://hufangyun.com/2017/short-url/)
- [短链接系统的算法原理](https://www.cnblogs.com/feiyafeiblog/p/8581853.html)
- [短链接、短网址使用的是什么算法？](https://www.zhihu.com/question/20103344/answer/573638467)
- [教你怎么实现缩短网址功能](https://juejin.im/post/5d2d33885188253a2e1b8626)
