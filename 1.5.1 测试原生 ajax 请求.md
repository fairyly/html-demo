

# 测试原生 ajax 请求


```


(function clearAllCookie() {
        var getLabel ='';
        var keys = document.cookie.match(/[^ =;]+(?=\=)/g);
        if (keys) {
            for (var i = keys.length; i--;)
                document.cookie = keys[i] + '=0;expires=' + new Date(0).toUTCString()
        }
        $('#goodForWorkShow').attr('data-isGood', 0)

        //获取参数
        var myurlId = "4905";

        var xml = new XMLHttpRequest();
        var url = "http://www.51sjsj.com/home/contest/getWorks.html?id=4905";       
        xml.open('get', url, true); 
        xml.setRequestHeader("Content-type","application/x-www-form-urlencoded"); 
        xml.onreadystatechange = function() {
              // readyState == 4说明请求已完成
              if (xml.readyState == 4 && xml.status == 200 || xml.status == 304) { 
                // 从服务器获得数据
                console.log( JSON.parse(xml.responseText).label);  
                getLabel = JSON.parse(xml.responseText).label;
                ajx()
              }
            };
        xml.send(); 
    //window.location.reload()

    function ajx() {
        var xml = new XMLHttpRequest();
        var url = "http://www.51sjsj.com//home/contest/worksLike.html";       
        xml.open('post', url, true); 
        xml.setRequestHeader("Content-type","application/x-www-form-urlencoded"); 
        xml.onreadystatechange = function() {
              // readyState == 4说明请求已完成
              if (xml.readyState == 4 && xml.status == 200 || xml.status == 304) { 
                // 从服务器获得数据
                console.log("post", xml.responseText);  
                
              }
            };
        xml.send("id=4905&label="+getLabel); 
    }
})()
```
