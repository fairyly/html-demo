# 1.9.2.1 json-schema

>2019.07.25 目前版本  `draft-07`

## json-schema
>JSON 模式是一种基于 JSON 格式定义 JSON 数据结构的规范。它被写在 IETF 草案下并于 2011 年到期。JSON 模式：
- 描述现有数据格式。
- 干净的人类和机器可读的文档。
- 完整的结构验证，有利于自动化测试。
- 完整的结构验证，可用于验证客户端提交的数据。

## Json schema 格式
Json schema 本身遵循Json规范，本身就是一个Json字符串，先来看一个例子

```
{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "title": "Product",
    "description": "A product from Acme's catalog",
    "type": "object",
    "properties": {
        "id": {
            "description": "The unique identifier for a product",
            "type": "integer"
        },
        "name": {
            "description": "Name of the product",
            "type": "string"
        },
        "price": {
            "type": "number",
            "minimum": 0,
            "exclusiveMinimum": true
        }
    },
    "required": ["id", "name", "price"]
}
```

json schema 最外层包含以下几个字段

|$schema  |描述  |   示例|
|--| --| -- |
$schema |$schema 关键字状态，表示这个模式与 v4 规范草案书写一致。| |
title |标题，用来描述结构|
description |描述 |
type |类型 ||
properties |定义属性 ||
required |必需属性 ||


上面只是一个简单的例子，从上面可以看出Json schema 本身是一个JSON字符串，由通过key-value的形式进行标示。

type 和 properties 用来定义json 属性的类型。required 是对Object字段的必段性进行约束。

## 数据类型 type

JavaScript

string

number

object

array

boolean

null

```
{
  "type": "object",
  "properties": {
    "first_name": { "type": "string" },
    "last_name": { "type": "string" },
    "birthday": { "type": "string", "format": "date" },
    "address": {
      "type": "object",
      "properties": {
        "street_address": { "type": "string" },
        "city": { "type": "string" },
        "state": { "type": "string" },
        "country": { "type" : "string" }
      }
    }
  }
}
```



## 参考
- [json-schema.org](http://json-schema.org/)
- [understanding-json-schema](https://github.com/json-schema-org/understanding-json-schema)
- [paularmstrong/normalizr](https://github.com/paularmstrong/normalizr)
- [jdorn/json-editor](https://github.com/jdorn/json-editor)
- [json-schema-faker/](https://github.com/json-schema-faker/json-schema-faker/)
- [tdegrunt/jsonschema](https://github.com/tdegrunt/jsonschema)
- [epoberezkin/ajv](https://github.com/epoberezkin/ajv)
- [Json Schema 快速入门](https://www.jianshu.com/p/8278eb2458c4)
