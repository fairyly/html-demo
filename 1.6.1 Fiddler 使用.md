# Fiddler 使用


>windows 系统

## 1.使用Fiddler进行抓包

要使用Fiddler进行抓包，首先需要确保Capture Traffic是开启的（安装后是默认开启的），

勾选File->Capture Traffic，也可以直接点击Fiddler界面左下角的图标开启和关闭抓包。

#：顺序号，按照抓包的顺序从1递增

- Result：HTTP状态码　　　　　　

- Protocol：请求使用的协议，如HTTP/HTTPS/FTP等

- HOST：请求地址的主机名或域名

- URL：请求资源的位置

- Body：请求大小

- Caching：请求的缓存过期时间或者缓存控制值

- Content-Type：请求响应的类型

- Process：发送此请求的进程ID

- Comments：备注 

- Custom：自定义值

## Insepector

每个Fiddler抓取到的数据包都会在该列表中展示，点击具体的一条数据包可以在右侧菜单点击Insepector查看详细内容。

主要分为请求（即客户端发出的数据）和响应（服务器返回的数据）两部分

## https == http + TSL 或 SSL

捕获 https 会话需要配置，tools--->options--->https

选中 "Decrypt HTTPS traffic", 首次会让安装证书的，都是 “yes”,同时选中 “ignore server certificate error” 忽略证书错误，

旁边还有一个 action，可以 Reset All certificates

安装后，测试，打开浏览器，访问 https://www.baidu.com 看能否捕获到 https 的百度请求


- 拓展：

  - 1.清除C:\Users\Administrator\AppData\Roaming\Microsoft\Crypto\RSA 目录下所有文件（首次安装fiddler请忽略）

  - 2.清除电脑上的根证书，WIN+R快捷键，输入：certmgr.msc， 然后回车，查找所有fiddler证书，然后删除。（首次安装fiddler请忽略）

  - 3.查看 windows 本地安装的证书
    - 3.1 tools--->options--->https--->action--->open window certificate mannger
    - 3.2 或者，命令行，输入 certmgr.msc
    - 就可以找到安装的证书叫 “DO_NOT_TRUST_FiddlerRoot-CE”


## 查看请求参数

webform 中参看请求你携带的参数
    

- 参考：[Fiddler抓取https设置详解（图文）](https://www.cnblogs.com/joshua317/p/8670923.html)

- get 提交的数据有大小限制（浏览器对URL长度有限制），get也不安全
- post 提交数据大小无限制



## http 状态码

- 1xx
- 2xx
- 3xx
- 4xx
- 5xx


## User-agent

>作用就是浏览器告诉服务器，客户端使用的操作系统 及版本，浏览器及版本等

fiddler: 修改 user-agent ,伪装客户端

rules---->user-agent ,选择 iphone 6



## referer
>主要用来让服务器判断来源页面，
有时候 referer也被用作防盗链

## 设置断点，修改 http 请求

- rules---> automatic breakpoint----> before request 或者使用 F11 快捷键

打开浏览器，输入网址后，打开 inspectors 面板， 使用 Raw 选项卡，这时候可以把请求的URL 修改，host 也可以修改，单击绿色的 “run to completion”即可

## 设置断点，修改 http 相应
- rules---> automatic breakpoint----> after request 

## 伪造 referer

- rules---> automatic breakpoint----> before request

打开 一个网络图片，这时候fiddler 会拦截请求 在 raw 选项上修改 http 请求，添加一个 Refere:www.test.com , run to completion


## 参考
- [fiddler 官网](https://www.telerik.com/fiddler)
- [download-fiddler](https://www.telerik.com/download/fiddler)
